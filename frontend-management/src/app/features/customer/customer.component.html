<div style="overflow-y: auto;height: calc(100vh - 140px)">
    <span style="font-size: 25px"> <b>Sản phẩm</b> </span>
    <p-table
            [value]="customers()"
            [tableStyle]="{ 'min-width': '30rem' }"
            [expandedRowKeys]="expandedRows()"
            dataKey="id"
            [rowHover]="true"
            [stripedRows]="true"
            (onRowExpand)="onRowExpand($event)">
        <ng-template #caption>
            <div class="flex">
                <div class="col-6 flex">
                    <p-iconfield iconPosition="left">
                        <p-inputicon>
                            <i class="pi pi-search"></i>
                        </p-inputicon>
                        <input (input)="delaySearch()"
                               pInputText
                               type="text"
                               [(ngModel)]="nameOrCodeOrPhoneNumKeyword"
                               placeholder="Tìm theo mã/tên/SĐT"/>
                    </p-iconfield>
                    <p-select
                            [style.margin-left.px]="10"
                            [options]="filterOption()"
                            (onChange)="delaySearch()"
                            optionLabel="name"
                            optionValue="value"
                            [(ngModel)]="filterSelection"
                            placeholder="Sắp xếp"/>
                    <p-select
                            [style.margin-left.px]="10"
                            [options]="statusOption()"
                            (onChange)="delaySearch()"
                            optionLabel="name"
                            optionValue="value"
                            [(ngModel)]="statusSelection"
                            placeholder="Bộ lọc"/>
                </div>
                <div class="col-6 flex justify-content-end">
                    <p-button (click)="this.saveFormVisible.set(true)" icon="pi pi-plus" severity="success"
                              class="mr-2"
                              label="Thêm mới"></p-button>
                    <!--                    <p-button (click)="exportExcel()" icon="pi pi-file-export" severity="success" class="mr-2"-->
                    <!--                              label="Xuất Excel"></p-button>-->
                    <!--	      <p-button class = "mr-0" icon = "pi pi-file-import" severity = "success"-->
                    <!--		      label = "Nhập Excel"></p-button>-->
                </div>
            </div>
        </ng-template>
        <ng-template #header>
            <tr>
                <th>Mã khách hàng</th>
                <th>Tên khách hàng</th>
                <th>Số điện thoai</th>
            </tr>
        </ng-template>
        <ng-template #body let-cus>
            <tr [pRowToggler]="cus">
                <td>{{ cus.code }}</td>
                <td>{{ cus.name }}</td>
                <td>{{ cus.phoneNum }}</td>
            </tr>
        </ng-template>
        <ng-template #expandedrow let-cus>
            <tr class="bg-primary-50">
                <td colspan="7">
                    <div>
                        <div class="grid mt-3">
                            <div class="col-3 flex justify-content-center">
                                <p-image
                                src="{{cus.imgUrl||baseImg}}"
                                alt="Image"
                                width="250"
                                [preview]="true"/>
                            </div>
                            <div class="col-4">
                                <div class="grid">
                                    <div style="font-weight: bold" class="col-4">Mã khách hàng:</div>
                                    <div class="col-8">{{ cus.code }}</div>
                                </div>
                                <div class="grid mt-1">
                                    <div style="font-weight: bold" class="col-4">Tên khách hàng:</div>
                                    <div class="col-8">{{ cus.name }}</div>
                                </div>
                                <div class="grid mt-1">
                                    <div style="font-weight: bold" class="col-4">Số điện thoai:</div>
                                    <div class="col-8">{{ cus.phoneNum }}</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </td>
            </tr>
        </ng-template>
        <ng-template #footer class="flex justify-content-center">
            <tr>
                <td colspan="100%" style="background-color: #ffffff">
                    <p-paginator #paginator
                                 (onPageChange)="onPageChange($event)"
                                 [rows]="size()"
                                 [totalRecords]="totalElements()"
                                 [rowsPerPageOptions]="[10, 20, 30]"
                                 appendTo="body"/>
                </td>
            </tr>
        </ng-template>
    </p-table>
    <p-toast [life]="3000"/>
</div>
@if (saveFormVisible()) {
    <app-customer-save-form
            [(visible)]="saveFormVisible"
            (onSave)="onSaveForm($event)"
            (message)="saveMessage($event)"
            [customerStatus]="statusSelection()"
    ></app-customer-save-form>
}